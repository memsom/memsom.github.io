<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0">
	<channel>
		<title>Matt's dev musings</title>
		<link>http://memsom.github.io/</link>
		<description>A blog where I record my travels through code.</description>
		<copyright>2021</copyright>
		<pubDate>Wed, 03 Mar 2021 11:25:15 GMT</pubDate>
		<lastBuildDate>Wed, 03 Mar 2021 11:25:15 GMT</lastBuildDate>
		<item>
			<title>First Post</title>
			<link>http://memsom.github.io/posts/first-post</link>
			<description>&lt;p&gt;This is a little blog I've decided to put together to document my travels through coding. I'm going to use it mainly to record a diary of my work, aid-memoire for stuff I've learned that I'll probably forget, and general help for others using my code or areas I'm an "expert" in.&lt;/p&gt;</description>
			<guid>http://memsom.github.io/posts/first-post</guid>
			<pubDate>Thu, 28 Jan 2021 00:00:00 GMT</pubDate>
			<content:encoded>&lt;h1 id="a-blog"&gt;A blog?&lt;/h1&gt;
&lt;p&gt;This is a little blog I've decided to put together to document my travels through coding. I'm going to use it mainly to record a diary of my work, aid-memoire for stuff I've learned that I'll probably forget, and general help for others using my code or areas I'm an &amp;quot;expert&amp;quot; in.&lt;/p&gt;
&lt;p&gt;I don't know how often it will be updated, but I have attempted to make it as simple as possible for myself by using &lt;a href="https://github.com/Wyamio/Wyam"&gt;Wyam&lt;/a&gt; to statically generate the content.&lt;/p&gt;
&lt;p&gt;So, what I am currently working on...&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/memsom/Mapsui-New"&gt;Mapsui.Forms&lt;/a&gt; - I have a custom version, which adds custom layers with customisable map objects, as well as a better abstraction of the map internal hierarchy.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/memsom/xamarin-bluetooth-le"&gt;xamarin-bluetooth-le&lt;/a&gt; - I have an Android only version that implements reliable writes.&lt;/li&gt;
&lt;li&gt;PSP development - I am trying to learn more about this and see if I can make some small games as a fun side project from the day job.&lt;/li&gt;
&lt;li&gt;Considering getting in to writing programming courses. Mainly around mobile development with Xamarin Forms.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There's more, but we will let that unfold over time.&lt;/p&gt;
</content:encoded>
		</item>
		<item>
			<title>Porting DNA to PSP (aka C Sharp on PSP)</title>
			<link>http://memsom.github.io/posts/making-csharp-on-psp</link>
			<description>&lt;p&gt;So, for a while I have wanted to get in to PSP programming. I've had a PSP since forever (2010?) and I always loved the form factor. I would dearly love a PSVita, but I can't really justify getting one without doing at least one PSP project.&lt;/p&gt;</description>
			<guid>http://memsom.github.io/posts/making-csharp-on-psp</guid>
			<pubDate>Thu, 28 Jan 2021 00:00:00 GMT</pubDate>
			<content:encoded>&lt;h1 id="making-the-psp-run.net-binaries"&gt;Making the PSP run .Net binaries&lt;/h1&gt;
&lt;p&gt;So, for a while I have wanted to get in to PSP programming. I've had a PSP since forever (2010?) and I always loved the form factor. I would dearly love a PSVita, but I can't really justify getting one without doing at least one PSP project.&lt;/p&gt;
&lt;p&gt;I decided to start looking at PSP development again. I've probably started 2 or 3 times over the last 10 or so years, but this time I finally went past a simple &amp;quot;hello, world!&amp;quot; or moving a simple block around the screen using the controls. Yes, I did those first too this time, but I also used that as an exercise to perfect my workflow. I now have a set-up on both PC (using a pre built SDK) and Mac (using an SDK I built myself from source) and have VSCode, USB HostFS, and PPSSPP running on both for quickly running code.&lt;/p&gt;
&lt;p&gt;The main issue with PSP homebrew these days is the lack of any really great documentation online. We have a lot of fragments, and the first week or so consisted of me searching out those fragments to see what I could find. I found enough to get going and so started on the next phase - porting DNA.&lt;/p&gt;
&lt;h1 id="dot-net-anywhere"&gt;Dot Net Anywhere&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/chrisdunelm/DotNetAnywhere"&gt;DNA&lt;/a&gt; is a project by &lt;a href="https://github.com/chrisdunelm"&gt;Chris Bacon&lt;/a&gt;. It is somewhat abandoned, but still runs most modern DotNet Assemblies with some caveats. It was used to bootstrap Blazor, and is really pretty good at running basic code, albeit through an interpreter. My PSP port is based on my repo, where I pulled together a lot of the Blazor changes and a few other improvements made in other branches not merged in the main repo, but on the whole it is Chris's original code base.&lt;/p&gt;
&lt;h2 id="bootstrapping"&gt;Bootstrapping&lt;/h2&gt;
&lt;p&gt;Making the code run on PSP was more about removing the parts that didn't fit with the way in which the PSP functions, rather than anything else. The PSP can't use dynamic libraries, so all the P/Invoke code needed to be removed. There isn't really a console, so I also removed all the console based code. After doing all this, the code almost compiled.&lt;/p&gt;
&lt;h2 id="globs"&gt;GLOBS&lt;/h2&gt;
&lt;p&gt;The main part of the code that still failed to work was the code relating to the disk/filesystem access. The DNA code uses the Unix/Linux style GLOB API to access that type of data, and the PSP SDK seems to be missing that chunk of code, despite having the headers. I hunted around for a solution. I managed to find a project called &lt;a href="https://www.bennugd.org/"&gt;Bennu Game Development&lt;/a&gt; and a &lt;a href="http://forum.bennugd.org/index.php?topic=715.85;wap2"&gt;post&lt;/a&gt; regarding their PSP port. This used an implementation of GLOB called &amp;quot;diet-glob&amp;quot;, and this worked nicely as a drop in replacement for the PSP. After that the code compiled!&lt;/p&gt;
&lt;h2 id="making-something-happen"&gt;Making something happen&lt;/h2&gt;
&lt;p&gt;So, having a runtime was not very useful on its own. So I created a new chunk of code specific to the PSP, in a namespace called &amp;quot;PSP&amp;quot;, and wired that in to the interpreter. I then wrote a simple app with the following code:&lt;/p&gt;
&lt;pre&gt;&lt;code class="language-csharp"&gt;using Psp;

namespace testSimple
{
    class Program
    {
        static void Main(string[] args)
        {
            var x = 10;
            Debug.ScreenPrintf($&amp;quot;x is {x}\n&amp;quot;);

            var y = 20;
            Debug.ScreenPrintf($&amp;quot;y is {y}\n&amp;quot;);
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And ran it on the PPSSPP emulator. After a couple of tweaks, I was greeted with the following image:&lt;/p&gt;
&lt;p&gt;&lt;img src="images/ppsspp.jpg" class="img-fluid" alt="Image of PPSSPP running the code" title="PPSSPP runs code" /&gt;&lt;/p&gt;
&lt;p&gt;Wow! It worked... So next was to install on a real PSP:&lt;/p&gt;
&lt;p&gt;&lt;img src="images/psp-home.jpg" class="img-fluid" alt="Image of DNA on PSP home screen" title="DNA on PSP home screen" /&gt;&lt;/p&gt;
&lt;p&gt;And.... the same app on a PSP:&lt;/p&gt;
&lt;p&gt;&lt;img src="images/psp.jpg" class="img-fluid" alt="Image of DNA on PSP running the app" title="DNA on PSP running the app" /&gt;&lt;/p&gt;
&lt;h2 id="conclusion"&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Well, it works. I am in the process of fleshing the code out more before releasing it. But I have now got a lot more working. Watch this space for more updates.&lt;/p&gt;
</content:encoded>
		</item>
	</channel>
</rss>